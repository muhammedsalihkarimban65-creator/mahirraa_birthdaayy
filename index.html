<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy Birthday Mahira ğŸ’–</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Dancing+Script:wght@700&family=Parisienne&display=swap" rel="stylesheet">
    <style>
        :root { --pink: #ff85a1; --dark-pink: #ff4d6d; --bg: #fff0f3; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        
        body { 
            margin: 0; background: var(--bg); font-family: 'Poppins', sans-serif; 
            height: 100vh; display: flex; justify-content: center; align-items: center; overflow: hidden; 
        }

        /* MUSIC START OVERLAY */
        #musicOverlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: var(--pink); z-index: 1000; display: flex; 
            flex-direction: column; justify-content: center; align-items: center;
            color: white; cursor: pointer; transition: 0.8s ease;
        }
        
        .container { 
            width: 94%; max-width: 380px; height: 92vh; background: rgba(255, 255, 255, 0.95); 
            border-radius: 45px; border: 6px solid #fff; position: relative; 
            display: flex; flex-direction: column; padding: 25px; text-align: center; 
            box-shadow: 0 25px 50px rgba(255,133,161,0.3);
        }

        .screen { display: none; flex-direction: column; height: 100%; animation: fadeIn 0.6s ease-out; }
        .active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        .floating-emoji { position: absolute; font-size: 50px; z-index: 100; animation: float 3.5s ease-in-out infinite; pointer-events: none; }
        .k1 { top: -15px; right: 5px; }
        .k2 { bottom: 85px; left: -10px; animation-delay: 1s; }
        @keyframes float { 0%, 100% { transform: translateY(0) rotate(8deg); } 50% { transform: translateY(-20px) rotate(-8deg); } }

        .title { font-family: 'Dancing Script', cursive; color: var(--dark-pink); font-size: 2.1rem; margin: 5px 0; line-height: 1.2; }

        #slideshow { width: 100%; height: 210px; border-radius: 30px; overflow: hidden; border: 5px solid #fff; box-shadow: 0 10px 25px rgba(255,133,161,0.3); position: relative; }
        #slideshow img { width: 100%; height: 100%; object-fit: cover; position: absolute; opacity: 0; transition: 1.5s ease-in-out; }
        #slideshow img.active { opacity: 1; }

        /* LONG SCROLLABLE LETTER */
        .envelope-space { position: relative; height: 320px; display: flex; justify-content: center; align-items: flex-end; padding-bottom: 20px; }
        .envelope-wrapper { position: relative; width: 230px; height: 140px; background: #ff85a1; border-radius: 0 0 20px 20px; cursor: pointer; z-index: 10; }
        .envelope-wrapper::before { 
            content: ""; position: absolute; top: -80px; left: 0; 
            border-left: 115px solid transparent; border-right: 115px solid transparent; 
            border-bottom: 80px solid #ff85a1; transition: 0.7s; transform-origin: bottom; z-index: 30; 
        }
        .letter { 
            position: absolute; bottom: 10px; left: 10px; width: 210px; height: 110px; 
            background: #fff; border-radius: 12px; padding: 25px; transition: 0.9s cubic-bezier(0.19, 1, 0.22, 1); 
            z-index: 5; box-shadow: 0 5px 15px rgba(0,0,0,0.1); overflow-y: auto; 
            text-align: left; font-size: 14.5px; line-height: 1.6; color: #333; border-top: 8px solid var(--pink);
        }
        .open .letter { transform: translateY(-260px); height: 440px; width: 310px; left: -40px; z-index: 40; }
        .open::before { transform: rotateX(180deg); z-index: 0; }

        #cakeCanvas { background: transparent; cursor: crosshair; touch-action: none; margin: 10px auto; }

        .letter-grid { display: grid; gap: 12px; }
        .flip-card { height: 85px; cursor: pointer; }
        .flip-card-inner { position: relative; width: 100%; height: 100%; transition: 0.8s; transform-style: preserve-3d; }
        .flipped .flip-card-inner { transform: rotateY(180deg); }
        .front, .back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 22px; border: 3px solid var(--pink); display: flex; align-items: center; justify-content: center; }
        .front { background: url('https://i.pinimg.com/736x/8d/64/0e/8d640e0600a0d489b4f74d0085d3857e.jpg') center/cover; }
        .back { background: var(--pink); color: white; transform: rotateY(180deg); padding: 12px; font-size: 0.9rem; font-weight: 600; }

        .btn { background: linear-gradient(to right, var(--dark-pink), #ff758c); color: white; border: none; padding: 18px; border-radius: 60px; font-weight: 600; cursor: pointer; margin-top: auto; }
    </style>
</head>
<body>

<audio id="bgMusic" loop preload="auto"><source src="jhol.mp3" type="audio/mpeg"></audio>

<div id="musicOverlay" onclick="enableMusic()">
    <div style="font-size: 5rem; animation: pulse 1s infinite;">ğŸ</div>
    <h2 style="font-family: 'Dancing Script';">Click to Open Mahira's Surprise</h2>
</div>

<div class="container">
    <div class="screen active" id="s1">
        <div class="floating-emoji k1">ğŸ‚</div>
        <h1 class="title">Happy Birthday My Dear Mahira ğŸ’–</h1>
        <div id="slideshow">
            <img src="pic1.jpg" class="active">
            <img src="pic2.jpg">
            <img src="pic3.jpg">
        </div>
        <p style="font-family:'Parisienne'; font-size: 1.6rem; color: var(--dark-pink); margin-top: 15px;">To my everything âœ¨</p>
        <button class="btn" onclick="next('s2')">Open My Heart ğŸ’Œ</button>
    </div>

    <div class="screen" id="s2">
        <div class="floating-emoji k1">ğŸ‚</div>
        <h1 class="title">For You ğŸ’•</h1>
        <div class="envelope-space">
            <div class="envelope-wrapper" onclick="this.classList.toggle('open')">
                <div class="letter">
                    <p style="font-family:'Dancing Script'; font-size:1.6rem; color:var(--dark-pink); margin:0;">My Dearest Mahira,</p><br>
                    I honestly can't express my love through words, but I have to tell you this...<br><br>
                    Whenever I'm stressed or in pain, <b>getting a text from you makes everything vanish</b>. You are my peace. Every pain I feel simply disappears the moment I see your name on my screen.<br><br>
                    Your <b>smile</b> is my favorite view in the entire world. And Mahira... <b>whenever we make eye contact, it feels like butterflies in my stomach.</b> It's a feeling I never want to lose.<br><br>
                    More than anything, <b>I want my future with you</b>. Please, don't ever make me a stranger and don't run away from me. I can't imagine a life where you aren't by my side. I want to grow with you, laugh with you, and be there for you forever.<br><br>
                    <b>I love you sooo much!</b> ğŸ˜šğŸ«¶ğŸ»ğŸ’—
                </div>
            </div>
        </div>
        <p style="font-size: 0.75rem; color: #777;">(Tap the envelope & scroll to read all)</p>
        <button class="btn" onclick="next('s3')">Cut Your Cake ğŸ‚</button>
    </div>

    <div class="screen" id="s3">
        <h1 class="title">Make a Wish</h1>
        <canvas id="cakeCanvas" width="300" height="260"></canvas>
        <p id="cakeHint">Swipe to cut the cake! ğŸ”ª</p>
        <button class="btn" id="cakeBtn" style="display:none;" onclick="next('s4')">See Secrets âœ¨</button>
    </div>

    <div class="screen" id="s4">
        <h1 class="title">For My Pretty Girl ğŸ•¸ï¸</h1>
        <div class="letter-grid">
            <div class="flip-card" onclick="this.classList.toggle('flipped')"><div class="flip-card-inner"><div class="front"></div><div class="back">Your smile is so beautiful! ğŸ˜</div></div></div>
            <div class="flip-card" onclick="this.classList.toggle('flipped')"><div class="flip-card-inner"><div class="front"></div><div class="back">Your eyes are very pretty! ğŸ‘€ğŸ’–</div></div></div>
            <div class="flip-card" onclick="this.classList.toggle('flipped')"><div class="flip-card-inner"><div class="front"></div><div class="back">Forever is only with you. ğŸ </div></div></div>
        </div>
        <button class="btn" onclick="next('s5')">Seal Our Love ğŸ’</button>
    </div>

    <div class="screen" id="s5">
        <div class="floating-emoji k2">ğŸ‚</div>
        <h1 class="title">Always Yours</h1>
        <div style="background:#fff; padding:50px 30px; border-radius:40px; border: 5px dashed var(--dark-pink); position:relative; box-shadow: 0 15px 30px rgba(0,0,0,0.05);">
            <div style="font-size:5rem; animation: pulse 1.2s infinite; margin-bottom: 20px;">ğŸ’</div>
            <p style="font-weight:600; font-size: 1.3rem;">Happy Birthday Mahira!</p>
            <p style="font-family:'Parisienne'; font-size:2.4rem; color: var(--dark-pink);">Love You Always</p>
        </div>
        <button class="btn" onclick="location.reload()">Replay Love âœ¨</button>
    </div>
</div>

<script>
    function enableMusic() {
        var music = document.getElementById('bgMusic');
        music.play().catch(e => console.log("Play failed", e));
        document.getElementById('musicOverlay').style.opacity = '0';
        setTimeout(() => { document.getElementById('musicOverlay').style.display = 'none'; }, 800);
    }

    const slides = document.querySelectorAll('#slideshow img');
    let cur = 0;
    setInterval(() => { slides[cur].classList.remove('active'); cur = (cur+1)%slides.length; slides[cur].classList.add('active'); }, 3000);

    function next(id) { 
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active')); 
        document.getElementById(id).classList.add('active'); 
        if(id==='s3') drawCake(false); 
    }

    function drawCake(isCut) {
        const canvas = document.getElementById('cakeCanvas');
        const ctx = canvas.getContext('2d');
        ctx.clearRect(0,0,300,260);
        ctx.fillStyle = "#ff85a1";
        ctx.beginPath(); ctx.ellipse(150, 190, 85, 42, 0, 0, Math.PI * 2); ctx.fill();
        ctx.fillRect(65, 140, 170, 50);
        ctx.fillStyle = "#ffb3c6";
        ctx.beginPath(); ctx.ellipse(150, 140, 85, 42, 0, 0, Math.PI * 2); ctx.fill();
        ctx.fillStyle = "#ff4d6d"; ctx.fillRect(146, 75, 8, 45);
        ctx.fillStyle = "#ffd93d"; ctx.beginPath(); ctx.arc(150, 65, 11, 0, 7); ctx.fill();
        if(isCut) { 
            ctx.strokeStyle="#fff"; ctx.lineWidth=12; ctx.lineCap="round";
            ctx.beginPath(); ctx.moveTo(150,120); ctx.lineTo(150,225); ctx.stroke(); 
        }
        const handleCut = () => { if(!isCut){ drawCake(true); document.getElementById('cakeHint').innerHTML="<b>ğŸ‚ Birthday Wish Made! ğŸ‚</b>"; document.getElementById('cakeBtn').style.display="block"; }};
        canvas.onmousedown = handleCut; canvas.ontouchstart = handleCut;
    }
</script>
<style> @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } } </style>
</body>
</html>
